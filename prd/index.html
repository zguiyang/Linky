<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linky - 智能书签管理器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              // 精致的灰度系统
              gray: {
                25: '#fcfcfc',
                50: '#fafafa',
                75: '#f8f8f8',
                100: '#f5f5f5',
                150: '#f2f2f2',
                200: '#e5e5e5',
                300: '#d4d4d4',
                400: '#a3a3a3',
                500: '#737373',
                600: '#525252',
                700: '#404040',
                800: '#262626',
                850: '#1f1f1f',
                900: '#171717',
                950: '#0a0a0a',
              },
              // 单一主题色
              primary: {
                50: '#f0f4ff',
                100: '#e0edff',
                200: '#c7ddff',
                300: '#a4c7ff',
                400: '#818dff',
                500: '#0066cc', // 主色
                600: '#0052a3', // hover
                700: '#004294',
              },
            },
            fontFamily: {
              sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'system-ui', 'sans-serif'],
            },
            boxShadow: {
              subtle: '0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.03)',
              card: '0 1px 3px 0 rgba(0, 0, 0, 0.04), 0 2px 4px 0 rgba(0, 0, 0, 0.02)',
              'card-hover': '0 4px 12px 0 rgba(0, 0, 0, 0.06), 0 2px 4px 0 rgba(0, 0, 0, 0.04)',
            },
          },
        },
      };
    </script>
    <style>
      /* 引入 Inter 字体 */
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

      /* 基础重置 */
      * {
        box-sizing: border-box;
      }

      body {
        font-family:
          'Inter',
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          system-ui,
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        color: #262626;
        font-size: 14px;
        line-height: 1.5;
      }

      /* 全局按钮样式 */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.15s;
        cursor: pointer;
        border: none;
        outline: none;
        white-space: nowrap;
      }

      .btn-sm {
        padding: 6px 12px;
        font-size: 13px;
      }

      .btn-xs {
        padding: 4px 8px;
        font-size: 12px;
      }

      .btn-primary {
        background: #0066cc;
        color: white;
      }

      .btn-primary:hover {
        background: #0052a3;
      }

      .btn-secondary {
        background: #f8f8f8;
        color: #525252;
        border: 0.5px solid #e5e5e5;
      }

      .btn-secondary:hover {
        background: #f2f2f2;
        color: #262626;
      }

      .btn-ghost {
        background: transparent;
        color: #737373;
      }

      .btn-ghost:hover {
        background: #f8f8f8;
        color: #525252;
      }

      /* 输入框样式 */
      input,
      textarea,
      select {
        font-family: inherit;
        font-size: 14px;
        line-height: 1.5;
        border: 0.5px solid #e5e5e5;
        border-radius: 6px;
        padding: 8px 12px;
        background: #ffffff;
        color: #262626;
        transition: all 0.15s;
        outline: none;
      }

      input:focus,
      textarea:focus,
      select:focus {
        border-color: #0066cc;
        box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
      }

      input::placeholder,
      textarea::placeholder {
        color: #a3a3a3;
      }

      /* 模态框样式 */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(10, 10, 10, 0.5);
        backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 16px;
      }

      .modal {
        background: #ffffff;
        border-radius: 12px;
        box-shadow:
          0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideIn 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        padding: 24px 24px 16px;
        border-bottom: 0.5px solid #e5e5e5;
      }

      .modal-title {
        font-size: 18px;
        font-weight: 600;
        color: #171717;
        margin: 0;
      }

      .modal-body {
        padding: 24px;
      }

      .modal-footer {
        padding: 16px 24px 24px;
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      /* 右键菜单样式 */
      .context-menu {
        position: fixed;
        background: #ffffff;
        border: 0.5px solid #e5e5e5;
        border-radius: 8px;
        box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.08);
        padding: 4px;
        z-index: 1000;
        min-width: 150px;
        animation: contextMenuSlideIn 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      @keyframes contextMenuSlideIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .context-menu-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 13px;
        color: #262626;
        cursor: pointer;
        transition: all 0.15s;
      }

      .context-menu-item:hover {
        background: #f8f8f8;
      }

      .context-menu-item i {
        width: 14px;
        text-align: center;
      }

      /* 表单组样式 */
      .form-group {
        margin-bottom: 16px;
      }

      .form-label {
        display: block;
        font-size: 14px;
        font-weight: 500;
        color: #262626;
        margin-bottom: 6px;
      }

      .form-label .required {
        color: #dc2626;
      }

      /* 复选框样式 */
      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }

      .checkbox-group input[type='checkbox'] {
        width: 16px;
        height: 16px;
        border-color: #e5e5e5;
        border-radius: 4px;
        cursor: pointer;
      }

      .checkbox-group label {
        font-size: 14px;
        color: #262626;
        cursor: pointer;
        user-select: none;
      }

      /* 加载中样式 */
      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid #e5e5e5;
        border-radius: 50%;
        border-top-color: #0066cc;
        animation: spin 0.6s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* KBD 样式 */
      kbd {
        display: inline-block;
        padding: 2px 6px;
        font-size: 11px;
        font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
        line-height: 1;
        color: #525252;
        background: #f8f8f8;
        border: 0.5px solid #e5e5e5;
        border-radius: 4px;
        box-shadow: 0 1px 0 0 #e5e5e5;
      }

      /* 统一的hover效果 */
      .interactive {
        transition: all 0.15s;
      }

      .interactive:hover {
        transform: translateY(-1px);
      }

      /* 统一的分隔线 */
      .divider {
        height: 1px;
        background: linear-gradient(to right, transparent, #e5e5e5, transparent);
      }

      /* 标签组 */
      .tag-group {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      /* 状态徽章 */
      .badge {
        display: inline-flex;
        align-items: center;
        padding: 2px 8px;
        font-size: 11px;
        font-weight: 500;
        border-radius: 4px;
        text-transform: uppercase;
        letter-spacing: 0.025em;
      }

      .badge-primary {
        background: #f0f4ff;
        color: #0066cc;
      }

      .badge-success {
        background: #f0fdf4;
        color: #16a34a;
      }

      .badge-warning {
        background: #fffbeb;
        color: #d97706;
      }

      .badge-error {
        background: #fef2f2;
        color: #dc2626;
      }

      /* 动画定义 */
      .fade-in {
        animation: fadeIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* 卡片样式 */
      .bookmark-card {
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .bookmark-card.grid-view {
        background: #ffffff;
        border: 0.5px solid #e5e5e5;
        border-radius: 8px;
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.04),
          0 2px 4px 0 rgba(0, 0, 0, 0.02);
        overflow: hidden;
      }

      .bookmark-card.grid-view:hover {
        border-color: #d4d4d4;
        box-shadow:
          0 4px 12px 0 rgba(0, 0, 0, 0.06),
          0 2px 4px 0 rgba(0, 0, 0, 0.04);
      }

      .bookmark-card.list-view {
        background: #ffffff;
        border: 0.5px solid #e5e5e5;
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        position: relative;
      }

      .bookmark-card.list-view:hover {
        border-color: #d4d4d4;
        box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.04);
      }

      /* 标签样式 - 简洁设计 */
      .tag-pill {
        display: inline-flex;
        align-items: center;
        padding: 4px 10px;
        font-size: 12px;
        font-weight: 500;
        border-radius: 6px;
        transition: all 0.15s;
        cursor: pointer;
        background: #f0f4ff;
        color: #0066cc;
        border: 0.5px solid #e0edff;
      }

      .tag-pill:hover {
        background: #e0edff;
      }

      /* Favicon 样式 */
      .website-favicon {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        flex-shrink: 0;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.04);
      }

      /* List 布局样式 */
      .list-view-content {
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }

      .list-view-main {
        flex: 1;
        min-width: 0;
      }

      .list-view-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
      }

      .list-view-title {
        font-weight: 600;
        color: #171717;
        font-size: 15px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        letter-spacing: -0.01em;
      }

      .list-view-url {
        font-size: 13px;
        color: #737373;
        font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
        background: #f8f8f8;
        padding: 4px 8px;
        border-radius: 4px;
        display: inline-block;
        margin-bottom: 8px;
        border: 0.5px solid #e5e5e5;
      }

      .list-view-description {
        color: #525252;
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 12px;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        font-weight: 400;
      }

      .list-view-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .list-view-meta {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 13px;
        color: #737373;
      }

      .list-view-actions {
        display: flex;
        align-items: center;
        gap: 4px;
        opacity: 0;
        transition: opacity 0.15s;
      }

      .bookmark-card.list-view:hover .list-view-actions {
        opacity: 1;
      }

      /* 访问次数样式 */
      .visit-count {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        background: #f8f8f8;
        border-radius: 6px;
        color: #525252;
        font-size: 12px;
        font-weight: 500;
        border: 0.5px solid #e5e5e5;
      }

      /* 操作按钮样式 */
      .action-btn {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        transition: all 0.15s;
        cursor: pointer;
        color: #737373;
      }

      .action-btn:hover {
        color: #0066cc;
        background: #f0f4ff;
      }

      .action-btn.delete:hover {
        color: #dc2626;
        background: #fef2f2;
      }

      /* 标题行优化 */
      .title-row {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
      }

      .favorite-star {
        color: #f59e0b;
        font-size: 14px;
      }

      /* 分隔线 */
      .bookmark-card.list-view:not(:last-child) {
        margin-bottom: 16px;
      }
    </style>
  </head>
  <body class="bg-gray-50/30">
    <!-- 三栏布局容器 -->
    <div class="flex h-screen">
      <!-- 第一栏：页面级导航 -->
      <nav class="w-16 bg-white border-r border-gray-200/50 flex flex-col items-center py-6">
        <!-- Logo -->
        <div class="mb-10">
          <i class="fas fa-bookmark text-primary-600 text-2xl"></i>
        </div>

        <!-- 页面导航 -->
        <div class="flex-1 flex flex-col items-center gap-2">
          <a href="index.html" class="nav-item group relative p-2.5 rounded-lg bg-primary-50 text-primary-600">
            <i class="fas fa-bookmark text-xl"></i>
            <!-- Tooltip -->
            <span
              class="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
              书签
            </span>
          </a>
          <a
            href="memos.html"
            class="nav-item group relative p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700">
            <i class="fas fa-sticky-note text-xl"></i>
            <!-- Tooltip -->
            <span
              class="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
              备忘录
            </span>
          </a>
          <button
            onclick="openGlobalSearch()"
            class="nav-item group relative p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700">
            <i class="fas fa-search text-xl"></i>
            <!-- Tooltip -->
            <span
              class="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
              全局搜索
            </span>
          </button>
        </div>

        <!-- 底部工具 -->
        <div class="flex flex-col items-center gap-2">
          <button class="p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700">
            <i class="fas fa-cog text-xl"></i>
          </button>
          <button class="p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700">
            <i class="fas fa-user text-xl"></i>
          </button>
        </div>
      </nav>

      <!-- 第二栏：页面内导航 -->
      <aside class="w-80 bg-white border-r border-gray-200/50 overflow-y-auto">
        <!-- 分类树 -->
        <div class="py-8 border-b border-gray-200/50">
          <div class="px-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="font-semibold text-sm text-gray-900">分类</h3>
              <div class="flex gap-0.5">
                <button
                  onclick="showAddCategoryModal()"
                  class="p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors"
                  title="新建分类">
                  <i class="fas fa-plus text-xs"></i>
                </button>
                <button
                  onclick="showManageCategoriesModal()"
                  class="p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors"
                  title="管理分类">
                  <i class="fas fa-cog text-xs"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="px-6">
            <ul class="space-y-0.5">
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '全部书签')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-folder-open text-amber-500 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">全部书签</span>
                  </a>
                  <span class="text-xs text-gray-500">156</span>
                </div>
              </li>
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '收藏夹')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-star text-amber-500 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">收藏夹</span>
                  </a>
                  <span class="text-xs text-gray-500">23</span>
                </div>
              </li>
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '开发工具')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-code text-primary-500 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">开发工具</span>
                  </a>
                  <span class="text-xs text-gray-500">45</span>
                </div>
              </li>
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '设计资源')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-palette text-purple-500 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">设计资源</span>
                  </a>
                  <span class="text-xs text-gray-500">28</span>
                </div>
              </li>
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '学习资源')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-book text-emerald-600 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">学习资源</span>
                  </a>
                  <span class="text-xs text-gray-500">38</span>
                </div>
              </li>
              <li>
                <div
                  class="category-item flex items-center justify-between p-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  oncontextmenu="showCategoryContextMenu(event, '效率工具')">
                  <a href="#" class="flex items-center flex-1">
                    <i class="fas fa-rocket text-red-500 mr-2 text-sm"></i>
                    <span class="text-sm text-gray-700">效率工具</span>
                  </a>
                  <span class="text-xs text-gray-500">21</span>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <!-- 标签管理 -->
        <div class="py-6 border-b border-gray-200/50">
          <div class="px-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="font-semibold text-sm text-gray-900">热门标签</h3>
              <button
                onclick="showManageTagsModal()"
                class="p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors"
                title="管理标签">
                <i class="fas fa-cog text-xs"></i>
              </button>
            </div>
          </div>
          <div class="px-6">
            <div class="flex flex-wrap gap-1.5">
              <span
                class="px-3 py-1.5 bg-primary-50 text-primary-600 text-xs rounded-md cursor-pointer hover:bg-primary-100 transition-colors font-medium">
                JavaScript
              </span>
              <span
                class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-md cursor-pointer hover:bg-gray-200 transition-colors font-medium">
                设计
              </span>
              <span
                class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-md cursor-pointer hover:bg-gray-200 transition-colors font-medium">
                工具
              </span>
              <span
                class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-md cursor-pointer hover:bg-gray-200 transition-colors font-medium">
                教程
              </span>
              <span
                class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-md cursor-pointer hover:bg-gray-200 transition-colors font-medium">
                API
              </span>
              <span
                class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-md cursor-pointer hover:bg-gray-200 transition-colors font-medium">
                框架
              </span>
            </div>
          </div>
        </div>

        <!-- 添加书签按钮 -->
        <div class="px-6 py-6">
          <button
            onclick="showAddBookmarkModal()"
            class="w-full bg-primary-600 text-white py-2.5 px-4 rounded-lg hover:bg-primary-700 flex items-center justify-center transition-colors font-medium text-sm">
            <i class="fas fa-plus mr-2 text-sm"></i>
            添加书签
          </button>
        </div>
      </aside>

      <!-- 第三栏：主内容区域 -->
      <main class="flex-1 bg-gray-50/30 overflow-y-auto">
        <!-- 工具栏 -->
        <div class="sticky top-0 bg-white border-b border-gray-200/50 px-8 py-4 z-10">
          <div class="flex items-center justify-between">
            <h1 class="text-2xl font-semibold text-gray-900">我的书签</h1>
            <div class="flex items-center gap-3">
              <!-- 视图切换 -->
              <div class="flex items-center bg-gray-100 rounded-lg p-0.5">
                <button
                  onclick="setViewMode('grid')"
                  id="gridViewBtn"
                  class="px-2.5 py-1.5 rounded-md bg-white shadow-sm text-gray-700 hover:bg-white transition-colors">
                  <i class="fas fa-th text-sm"></i>
                </button>
                <button
                  onclick="setViewMode('list')"
                  id="listViewBtn"
                  class="px-2.5 py-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-white/50 transition-colors">
                  <i class="fas fa-list text-sm"></i>
                </button>
              </div>
              <!-- 排序 -->
              <select class="border border-gray-200/50 rounded-lg px-3 py-2 text-sm bg-white">
                <option>最近添加</option>
                <option>最多访问</option>
                <option>名称排序</option>
              </select>
            </div>
          </div>
        </div>

        <!-- 书签内容 -->
        <div class="p-8">
          <!-- 书签网格 -->
          <div id="bookmarksGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
            <!-- 书签卡片将通过JavaScript动态生成 -->
          </div>
        </div>
      </main>
    </div>

    <!-- 添加书签模态框 -->
    <div id="addBookmarkModal" class="hidden modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">添加新书签</h3>
        </div>
        <form onsubmit="handleAddBookmark(event)">
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">标题 <span class="required">*</span></label>
              <input type="text" required placeholder="输入书签标题" />
            </div>
            <div class="form-group">
              <label class="form-label">URL <span class="required">*</span></label>
              <input type="url" required placeholder="https://example.com" />
            </div>
            <div class="form-group">
              <label class="form-label">描述</label>
              <textarea rows="3" placeholder="添加简短描述（可选）"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">分类</label>
              <select>
                <option>开发工具</option>
                <option>设计资源</option>
                <option>学习资源</option>
                <option>效率工具</option>
                <option>其他</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">标签</label>
              <input type="text" placeholder="用逗号分隔多个标签" />
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" onclick="hideAddBookmarkModal()" class="btn btn-secondary">取消</button>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-plus"></i>
              添加书签
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- 添加分类模态框 -->
    <div id="addCategoryModal" class="hidden modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">新建分类</h3>
        </div>
        <form onsubmit="handleAddCategory(event)">
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">分类名称 <span class="required">*</span></label>
              <input type="text" required placeholder="输入分类名称" class="w-full" />
            </div>
            <div class="form-group">
              <label class="form-label">父分类</label>
              <select class="w-full">
                <option value="">无（顶级分类）</option>
                <option value="开发工具">开发工具</option>
                <option value="设计资源">设计资源</option>
                <option value="学习资源">学习资源</option>
                <option value="效率工具">效率工具</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">图标</label>
              <div class="grid grid-cols-6 gap-2">
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-folder text-gray-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-code text-primary-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-palette text-purple-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-book text-emerald-600"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-rocket text-red-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-star text-amber-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-heart text-pink-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-gamepad text-indigo-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-camera text-teal-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-music text-orange-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-shopping-cart text-cyan-500"></i>
                </button>
                <button
                  type="button"
                  class="icon-option p-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-all">
                  <i class="fas fa-globe text-blue-500"></i>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">颜色</label>
              <div class="flex gap-2 flex-wrap">
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-primary-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-emerald-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-purple-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-red-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-amber-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-pink-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-indigo-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-teal-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-orange-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
                <button
                  type="button"
                  class="color-option w-10 h-10 rounded-full border-3 border-gray-200 hover:scale-110 transition-transform relative">
                  <span class="absolute inset-0 rounded-full bg-gray-500"></span>
                  <span class="absolute inset-0 rounded-full border-2 border-white shadow-sm"></span>
                </button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" onclick="hideAddCategoryModal()" class="btn btn-secondary">取消</button>
            <button type="submit" class="btn btn-primary">创建分类</button>
          </div>
        </form>
      </div>
    </div>

    <!-- 管理分类模态框 -->
    <div id="manageCategoriesModal" class="hidden modal-overlay">
      <div class="modal" style="max-width: 640px">
        <div class="modal-header">
          <h3 class="modal-title">管理分类</h3>
        </div>
        <div class="modal-body">
          <div class="space-y-3">
            <div
              class="category-manage-item group bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-all">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-code text-blue-500"></i>
                  </div>
                  <div class="min-w-0">
                    <h4 class="font-semibold text-gray-900">开发工具</h4>
                    <div class="flex items-center gap-2 mt-1">
                      <span class="text-sm text-gray-500">45 个书签</span>
                      <span
                        class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-600">
                        技术
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button
                    onclick="editCategory('开发工具')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-blue-600 hover:bg-blue-50">
                    <i class="fas fa-edit"></i>
                    <span class="ml-1">编辑</span>
                  </button>
                  <button
                    onclick="deleteCategory('开发工具')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-red-600 hover:bg-red-50">
                    <i class="fas fa-trash"></i>
                    <span class="ml-1">删除</span>
                  </button>
                </div>
              </div>
            </div>

            <div
              class="category-manage-item group bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-all">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-palette text-purple-500"></i>
                  </div>
                  <div class="min-w-0">
                    <h4 class="font-semibold text-gray-900">设计资源</h4>
                    <div class="flex items-center gap-2 mt-1">
                      <span class="text-sm text-gray-500">28 个书签</span>
                      <span
                        class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-600">
                        设计
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button
                    onclick="editCategory('设计资源')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-blue-600 hover:bg-blue-50">
                    <i class="fas fa-edit"></i>
                    <span class="ml-1">编辑</span>
                  </button>
                  <button
                    onclick="deleteCategory('设计资源')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-red-600 hover:bg-red-50">
                    <i class="fas fa-trash"></i>
                    <span class="ml-1">删除</span>
                  </button>
                </div>
              </div>
            </div>

            <div
              class="category-manage-item group bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-all">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-book text-emerald-600"></i>
                  </div>
                  <div class="min-w-0">
                    <h4 class="font-semibold text-gray-900">学习资源</h4>
                    <div class="flex items-center gap-2 mt-1">
                      <span class="text-sm text-gray-500">38 个书签</span>
                      <span
                        class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-600">
                        教育
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button
                    onclick="editCategory('学习资源')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-blue-600 hover:bg-blue-50">
                    <i class="fas fa-edit"></i>
                    <span class="ml-1">编辑</span>
                  </button>
                  <button
                    onclick="deleteCategory('学习资源')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-red-600 hover:bg-red-50">
                    <i class="fas fa-trash"></i>
                    <span class="ml-1">删除</span>
                  </button>
                </div>
              </div>
            </div>

            <div
              class="category-manage-item group bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-all">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-rocket text-red-500"></i>
                  </div>
                  <div class="min-w-0">
                    <h4 class="font-semibold text-gray-900">效率工具</h4>
                    <div class="flex items-center gap-2 mt-1">
                      <span class="text-sm text-gray-500">21 个书签</span>
                      <span
                        class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-600">
                        生产力
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button
                    onclick="editCategory('效率工具')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-blue-600 hover:bg-blue-50">
                    <i class="fas fa-edit"></i>
                    <span class="ml-1">编辑</span>
                  </button>
                  <button
                    onclick="deleteCategory('效率工具')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-red-600 hover:bg-red-50">
                    <i class="fas fa-trash"></i>
                    <span class="ml-1">删除</span>
                  </button>
                </div>
              </div>
            </div>

            <div
              class="category-manage-item group bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-all">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-star text-amber-500"></i>
                  </div>
                  <div class="min-w-0">
                    <h4 class="font-semibold text-gray-900">收藏夹</h4>
                    <div class="flex items-center gap-2 mt-1">
                      <span class="text-sm text-gray-500">23 个书签</span>
                      <span
                        class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-600">
                        系统
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button
                    onclick="editCategory('收藏夹')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-blue-600 hover:bg-blue-50">
                    <i class="fas fa-edit"></i>
                    <span class="ml-1">编辑</span>
                  </button>
                  <button
                    onclick="deleteCategory('收藏夹')"
                    class="btn btn-xs btn-ghost text-gray-500 hover:text-red-600 hover:bg-red-50"
                    disabled>
                    <i class="fas fa-trash"></i>
                    <span class="ml-1">删除</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" onclick="hideManageCategoriesModal()" class="btn btn-secondary">关闭</button>
          <button type="button" onclick="showAddCategoryModal(); hideManageCategoriesModal();" class="btn btn-primary">
            <i class="fas fa-plus mr-2"></i>
            新建分类
          </button>
        </div>
      </div>
    </div>

    <!-- 管理标签模态框 -->
    <div id="manageTagsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
        <h3 class="text-xl font-semibold mb-4">管理标签</h3>

        <!-- 新建标签 -->
        <div class="mb-6 p-4 bg-gray-50 rounded-lg">
          <h4 class="font-medium mb-3">新建标签</h4>
          <div class="flex gap-2">
            <input
              type="text"
              id="newTagInput"
              placeholder="输入标签名称"
              class="flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary" />
            <button onclick="addNewTag()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600">
              <i class="fas fa-plus mr-2"></i>添加
            </button>
          </div>
        </div>

        <!-- 标签列表 -->
        <div class="mb-4">
          <h4 class="font-medium mb-3">所有标签</h4>
          <div class="space-y-2">
            <div class="flex items-center justify-between p-3 border rounded-lg">
              <div class="flex items-center gap-2">
                <span class="px-3 py-1 bg-blue-100 text-blue-600 text-xs rounded-full">JavaScript</span>
                <span class="text-sm text-gray-500">23 个书签</span>
              </div>
              <div class="flex gap-2">
                <button class="p-1 text-gray-400 hover:text-blue-500 rounded">
                  <i class="fas fa-edit text-sm"></i>
                </button>
                <button class="p-1 text-gray-400 hover:text-red-500 rounded">
                  <i class="fas fa-trash text-sm"></i>
                </button>
              </div>
            </div>
            <div class="flex items-center justify-between p-3 border rounded-lg">
              <div class="flex items-center gap-2">
                <span class="px-3 py-1 bg-green-100 text-green-600 text-xs rounded-full">设计</span>
                <span class="text-sm text-gray-500">18 个书签</span>
              </div>
              <div class="flex gap-2">
                <button class="p-1 text-gray-400 hover:text-blue-500 rounded">
                  <i class="fas fa-edit text-sm"></i>
                </button>
                <button class="p-1 text-gray-400 hover:text-red-500 rounded">
                  <i class="fas fa-trash text-sm"></i>
                </button>
              </div>
            </div>
            <div class="flex items-center justify-between p-3 border rounded-lg">
              <div class="flex items-center gap-2">
                <span class="px-3 py-1 bg-purple-100 text-purple-600 text-xs rounded-full">工具</span>
                <span class="text-sm text-gray-500">15 个书签</span>
              </div>
              <div class="flex gap-2">
                <button class="p-1 text-gray-400 hover:text-blue-500 rounded">
                  <i class="fas fa-edit text-sm"></i>
                </button>
                <button class="p-1 text-gray-400 hover:text-red-500 rounded">
                  <i class="fas fa-trash text-sm"></i>
                </button>
              </div>
            </div>
            <div class="flex items-center justify-between p-3 border rounded-lg">
              <div class="flex items-center gap-2">
                <span class="px-3 py-1 bg-yellow-100 text-yellow-600 text-xs rounded-full">教程</span>
                <span class="text-sm text-gray-500">12 个书签</span>
              </div>
              <div class="flex gap-2">
                <button class="p-1 text-gray-400 hover:text-blue-500 rounded">
                  <i class="fas fa-edit text-sm"></i>
                </button>
                <button class="p-1 text-gray-400 hover:text-red-500 rounded">
                  <i class="fas fa-trash text-sm"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="flex justify-end">
          <button onclick="hideManageTagsModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-50">关闭</button>
        </div>
      </div>
    </div>

    <!-- 全局搜索对话框 -->
    <div id="globalSearchModal" class="hidden modal-overlay">
      <div class="modal" style="max-width: 600px">
        <div class="relative">
          <!-- 搜索输入框 -->
          <div class="p-6 pb-4">
            <div class="relative">
              <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              <input
                id="globalSearchInput"
                type="text"
                placeholder="搜索书签、分类或备忘录..."
                class="w-full pl-12 pr-12 py-3 text-lg" />
              <kbd
                class="absolute right-4 top-1/2 transform -translate-y-1/2 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-md"
                >ESC</kbd
              >
            </div>
          </div>

          <!-- 搜索结果区域 -->
          <div id="searchResults" class="max-h-96 overflow-y-auto px-6 pb-4">
            <!-- 搜索历史 -->
            <div id="searchHistory" class="mb-4">
              <h3 class="text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide">搜索历史</h3>
              <div class="flex flex-wrap gap-2">
                <span
                  class="search-history-item px-3 py-1.5 bg-gray-100 text-gray-600 rounded-md text-sm cursor-pointer hover:bg-gray-200 transition-colors"
                  >GitHub</span
                >
                <span
                  class="search-history-item px-3 py-1.5 bg-gray-100 text-gray-600 rounded-md text-sm cursor-pointer hover:bg-gray-200 transition-colors"
                  >设计资源</span
                >
                <span
                  class="search-history-item px-3 py-1.5 bg-gray-100 text-gray-600 rounded-md text-sm cursor-pointer hover:bg-gray-200 transition-colors"
                  >JavaScript</span
                >
              </div>
            </div>

            <!-- 搜索结果组 -->
            <div id="searchResultsContent" class="hidden">
              <!-- 书签结果 -->
              <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide flex items-center gap-2">
                  <i class="fas fa-bookmark"></i>
                  书签
                </h3>
                <div id="bookmarkResults" class="space-y-2"></div>
              </div>

              <!-- 分类结果 -->
              <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide flex items-center gap-2">
                  <i class="fas fa-folder"></i>
                  分类
                </h3>
                <div id="categoryResults" class="space-y-2"></div>
              </div>

              <!-- 备忘录结果 -->
              <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide flex items-center gap-2">
                  <i class="fas fa-sticky-note"></i>
                  备忘录
                </h3>
                <div id="memoResults" class="space-y-2"></div>
              </div>
            </div>

            <!-- 无结果提示 -->
            <div id="noResults" class="hidden text-center py-12">
              <i class="fas fa-search text-4xl mb-4 text-gray-300"></i>
              <p class="text-gray-500">没有找到相关结果</p>
            </div>
          </div>

          <!-- 底部快捷键提示 -->
          <div class="border-t border-gray-200/50 px-6 py-3">
            <div class="flex justify-center gap-4 text-xs text-gray-500">
              <span><kbd class="bg-gray-100 px-2 py-1 rounded text-gray-600">↑↓</kbd> 导航</span>
              <span><kbd class="bg-gray-100 px-2 py-1 rounded text-gray-600">Enter</kbd> 选择</span>
              <span><kbd class="bg-gray-100 px-2 py-1 rounded text-gray-600">ESC</kbd> 关闭</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 模拟数据
      const mockBookmarks = [
        {
          id: 1,
          title: 'GitHub',
          url: 'https://github.com',
          description: '全球最大的代码托管平台，开发者必备工具',
          thumbnail: 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400',
          tags: ['开发', '代码', '开源'],
          category: '开发工具',
          visitCount: 156,
          isFavorite: true,
        },
        {
          id: 2,
          title: 'Stack Overflow',
          url: 'https://stackoverflow.com',
          description: '程序员问答社区，解决技术问题的最佳平台',
          thumbnail: 'https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=400',
          tags: ['问答', '社区', '学习'],
          category: '学习资源',
          visitCount: 89,
          isFavorite: false,
        },
        {
          id: 3,
          title: 'Dribbble',
          url: 'https://dribbble.com',
          description: '设计师作品展示平台，获取灵感的重要来源',
          thumbnail: 'https://images.unsplash.com/photo-1558655146-d09347e92766?w=400',
          tags: ['设计', '灵感', 'UI/UX'],
          category: '设计资源',
          visitCount: 67,
          isFavorite: false,
        },
        {
          id: 4,
          title: 'Medium',
          url: 'https://medium.com',
          description: '高质量的内容发布平台，深度技术文章',
          thumbnail: 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400',
          tags: ['阅读', '文章', '深度'],
          category: '阅读资源',
          visitCount: 234,
          isFavorite: true,
        },
        {
          id: 5,
          title: 'Notion',
          url: 'https://notion.so',
          description: '全能的笔记和知识管理工具，组织个人和团队信息',
          thumbnail: 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400',
          tags: ['笔记', '工具', '效率'],
          category: '效率工具',
          visitCount: 178,
          isFavorite: true,
        },
        {
          id: 6,
          title: 'Tailwind CSS',
          url: 'https://tailwindcss.com',
          description: '实用优先的CSS框架，快速构建美观界面',
          thumbnail: 'https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?w=400',
          tags: ['CSS', '框架', '前端'],
          category: '开发工具',
          visitCount: 92,
          isFavorite: false,
        },
      ];

      // 当前视图模式
      let currentViewMode = 'grid';

      // 渲染书签卡片
      function renderBookmarks() {
        const grid = document.getElementById('bookmarksGrid');

        if (currentViewMode === 'grid') {
          grid.className = 'grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6';
          grid.innerHTML = mockBookmarks
            .map(
              bookmark => `
                <div class="bookmark-card grid-view fade-in">
                    <div class="aspect-video bg-gray-200 relative">
                        <img src="${bookmark.thumbnail}" alt="${bookmark.title}"
                             class="w-full h-full object-cover"
                             loading="lazy">
                        ${bookmark.isFavorite ? '<i class="fas fa-star text-yellow-400 absolute top-2 right-2"></i>' : ''}
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-1 truncate">${bookmark.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${bookmark.description}</p>
                        <div class="flex flex-wrap gap-1 mb-3">
                            ${bookmark.tags
                              .map(
                                tag => `
                                <span class="tag-pill px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full">
                                    ${tag}
                                </span>
                            `
                              )
                              .join('')}
                        </div>
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span class="flex items-center">
                                <i class="fas fa-eye mr-1"></i>
                                ${bookmark.visitCount}
                            </span>
                            <span class="flex items-center gap-2">
                                <button class="hover:text-primary" onclick="editBookmark(${bookmark.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="hover:text-red-500" onclick="deleteBookmark(${bookmark.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            `
            )
            .join('');
        } else {
          // List view
          grid.className = 'space-y-4 px-1';
          grid.innerHTML = mockBookmarks
            .map(
              bookmark => `
                <div class="bookmark-card list-view fade-in">
                    <div class="list-view-content">
                        <img src="https://www.google.com/s2/favicons?domain=${new URL(bookmark.url).hostname}&sz=32"
                             alt="${bookmark.title}"
                             class="website-favicon"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0idXJsKCNncmFkaWVudCkiLz4KPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTggMEMzLjYgMCAwIDMuNiAwIDhTMy42IDE2IDggMTZTMTYgMTIuNCAxNiA4UzEyLjQgMCA4IDBaIiBmaWxsPSIjNjI3M0E5Ii8+CjxjaXJjbGUgY3g9IjgiIGN5PSIxMCIgcj0iMiIgZmlsbD0iIzM3NEZGOCIvPgo8L3N2Zz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjlGQUZCIi8+CjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0U1RTdFQiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPg=='">

                        <div class="list-view-main">
                            <div class="title-row">
                                <h3 class="list-view-title">${bookmark.title}</h3>
                                ${bookmark.isFavorite ? '<i class="fas fa-star favorite-star"></i>' : ''}
                            </div>
                            <div class="list-view-url mb-3">${bookmark.url}</div>
                            <p class="list-view-description">${bookmark.description}</p>
                            <div class="list-view-footer">
                                <div class="list-view-meta">
                                    <div class="flex flex-wrap gap-2 mb-2">
                                        ${bookmark.tags
                                          .map(
                                            tag => `
                                            <span class="tag-pill">
                                                ${tag}
                                            </span>
                                        `
                                          )
                                          .join('')}
                                    </div>
                                    <div class="visit-count">
                                        <i class="fas fa-eye"></i>
                                        <span>${bookmark.visitCount}</span>
                                    </div>
                                </div>
                                <div class="list-view-actions">
                                    <button class="action-btn edit" onclick="editBookmark(${bookmark.id})" title="编辑">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete" onclick="deleteBookmark(${bookmark.id})" title="删除">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
            )
            .join('');
        }
      }

      // 模态框控制
      function showAddBookmarkModal() {
        document.getElementById('addBookmarkModal').classList.remove('hidden');
      }

      function hideAddBookmarkModal() {
        document.getElementById('addBookmarkModal').classList.add('hidden');
      }

      function handleAddBookmark(event) {
        event.preventDefault();
        // 模拟添加书签
        alert('书签添加成功！');
        hideAddBookmarkModal();
      }

      function editBookmark(id) {
        alert('编辑书签功能（ID: ' + id + '）');
      }

      function deleteBookmark(id) {
        if (confirm('确定要删除这个书签吗？')) {
          alert('书签已删除！');
        }
      }

      // 视图模式切换
      function setViewMode(mode) {
        const gridBtn = document.getElementById('gridViewBtn');
        const listBtn = document.getElementById('listViewBtn');

        // 更新当前视图模式
        currentViewMode = mode;

        // 更新按钮样式
        if (mode === 'grid') {
          gridBtn.classList.add('bg-white', 'shadow-sm');
          listBtn.classList.remove('bg-white', 'shadow-sm');
        } else {
          listBtn.classList.add('bg-white', 'shadow-sm');
          gridBtn.classList.remove('bg-white', 'shadow-sm');
        }

        // 重新渲染书签
        renderBookmarks();
      }

      // 初始化
      document.addEventListener('DOMContentLoaded', function () {
        renderBookmarks();
      });

      // 移动端菜单
      function toggleMobileMenu() {
        // 简化版移动端菜单切换
        alert('移动端菜单功能');
      }

      // 全局搜索功能
      const globalSearchData = {
        bookmarks: mockBookmarks,
        categories: [
          { id: 1, name: '开发工具', icon: 'fa-code', count: 45 },
          { id: 2, name: '设计资源', icon: 'fa-palette', count: 28 },
          { id: 3, name: '学习资源', icon: 'fa-book', count: 38 },
          { id: 4, name: '效率工具', icon: 'fa-rocket', count: 21 },
        ],
        memos: [
          { id: 1, title: '项目启动清单', content: '项目启动前准备事项', tags: ['工作', '待办'] },
          { id: 2, title: '面试准备', content: 'JavaScript基础：原型链、闭包、异步编程', tags: ['学习'] },
          { id: 3, title: '设计系统文档', content: '色彩规范：主色调#3b82f6', tags: ['灵感'] },
        ],
      };

      let currentSearchIndex = 0;
      let searchResults = [];

      function openGlobalSearch() {
        const modal = document.getElementById('globalSearchModal');
        const input = document.getElementById('globalSearchInput');

        modal.classList.remove('hidden');
        setTimeout(() => input.focus(), 100);

        // 绑定键盘事件
        document.addEventListener('keydown', handleGlobalSearchKeydown);
      }

      function closeGlobalSearch() {
        const modal = document.getElementById('globalSearchModal');
        modal.classList.add('hidden');

        // 清除搜索结果
        document.getElementById('globalSearchInput').value = '';
        document.getElementById('searchResultsContent').classList.add('hidden');
        document.getElementById('searchHistory').classList.remove('hidden');
        document.getElementById('noResults').classList.add('hidden');

        // 移除键盘事件
        document.removeEventListener('keydown', handleGlobalSearchKeydown);
      }

      function handleGlobalSearchKeydown(e) {
        const modal = document.getElementById('globalSearchModal');

        // ESC 关闭搜索
        if (e.key === 'Escape') {
          closeGlobalSearch();
          return;
        }

        // Enter 选择结果
        if (e.key === 'Enter' && searchResults.length > 0) {
          const result = searchResults[currentSearchIndex];
          if (result) {
            handleSearchResultClick(result);
          }
          return;
        }

        // 上下箭头导航
        if (e.key === 'ArrowUp') {
          e.preventDefault();
          navigateSearchResults(-1);
        } else if (e.key === 'ArrowDown') {
          e.preventDefault();
          navigateSearchResults(1);
        }
      }

      function navigateSearchResults(direction) {
        const items = document.querySelectorAll('.search-result-item');

        // 移除当前高亮
        if (items[currentSearchIndex]) {
          items[currentSearchIndex].classList.remove('bg-blue-50', 'border-l-4', 'border-blue-500');
        }

        // 计算新索引
        currentSearchIndex += direction;
        if (currentSearchIndex < 0) currentSearchIndex = items.length - 1;
        if (currentSearchIndex >= items.length) currentSearchIndex = 0;

        // 添加新高亮
        if (items[currentSearchIndex]) {
          items[currentSearchIndex].classList.add('bg-blue-50', 'border-l-4', 'border-blue-500');
          items[currentSearchIndex].scrollIntoView({ block: 'nearest' });
        }
      }

      function performGlobalSearch(query) {
        if (!query.trim()) {
          document.getElementById('searchResultsContent').classList.add('hidden');
          document.getElementById('searchHistory').classList.remove('hidden');
          return;
        }

        const lowerQuery = query.toLowerCase();
        searchResults = [];

        // 搜索书签
        const bookmarkResults = globalSearchData.bookmarks
          .filter(
            bookmark =>
              bookmark.title.toLowerCase().includes(lowerQuery) ||
              bookmark.description.toLowerCase().includes(lowerQuery) ||
              bookmark.tags.some(tag => tag.toLowerCase().includes(lowerQuery))
          )
          .slice(0, 3)
          .map(bookmark => ({ ...bookmark, type: 'bookmark' }));

        // 搜索分类
        const categoryResults = globalSearchData.categories
          .filter(category => category.name.toLowerCase().includes(lowerQuery))
          .map(category => ({ ...category, type: 'category' }));

        // 搜索备忘录
        const memoResults = globalSearchData.memos
          .filter(
            memo =>
              memo.title.toLowerCase().includes(lowerQuery) ||
              memo.content.toLowerCase().includes(lowerQuery) ||
              memo.tags.some(tag => tag.toLowerCase().includes(lowerQuery))
          )
          .slice(0, 3)
          .map(memo => ({ ...memo, type: 'memo' }));

        searchResults = [...bookmarkResults, ...categoryResults, ...memoResults];

        // 显示搜索结果
        displaySearchResults(bookmarkResults, categoryResults, memoResults);
      }

      function displaySearchResults(bookmarkResults, categoryResults, memoResults) {
        document.getElementById('searchHistory').classList.add('hidden');

        if (bookmarkResults.length === 0 && categoryResults.length === 0 && memoResults.length === 0) {
          document.getElementById('searchResultsContent').classList.add('hidden');
          document.getElementById('noResults').classList.remove('hidden');
          return;
        }

        document.getElementById('searchResultsContent').classList.remove('hidden');
        document.getElementById('noResults').classList.add('hidden');

        // 渲染书签结果
        const bookmarkResultsEl = document.getElementById('bookmarkResults');
        if (bookmarkResults.length > 0) {
          bookmarkResultsEl.innerHTML = bookmarkResults
            .map(
              bookmark => `
              <div class="search-result-item p-3 hover:bg-gray-50 cursor-pointer rounded border-l-4 border-transparent transition-all"
                   onclick="handleSearchResultClick(${JSON.stringify(bookmark).replace(/"/g, '&quot;')})">
                <div class="flex items-start gap-3">
                  <img src="${bookmark.thumbnail || 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=80'}"
                       alt="${bookmark.title}"
                       class="w-12 h-12 rounded object-cover flex-shrink-0"
                       onerror="this.src='https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=80'">
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2">
                      <i class="fas fa-bookmark text-blue-500"></i>
                      <span class="font-medium truncate">${bookmark.title}</span>
                      ${bookmark.isFavorite ? '<i class="fas fa-star text-yellow-400 text-sm"></i>' : ''}
                    </div>
                    <p class="text-sm text-gray-600 mt-1 line-clamp-2">${bookmark.description}</p>
                    <div class="flex gap-2 mt-2">
                      ${bookmark.tags.map(tag => `<span class="px-2 py-0.5 bg-blue-100 text-blue-600 text-xs rounded">${tag}</span>`).join('')}
                    </div>
                  </div>
                  <div class="text-xs text-gray-500 flex-shrink-0">
                    <div>${bookmark.visitCount} 次访问</div>
                  </div>
                </div>
              </div>
            `
            )
            .join('');
        } else {
          bookmarkResultsEl.innerHTML = '<p class="text-sm text-gray-500 p-3">无相关书签</p>';
        }

        // 渲染分类结果
        const categoryResultsEl = document.getElementById('categoryResults');
        if (categoryResults.length > 0) {
          categoryResultsEl.innerHTML = categoryResults
            .map(
              category => `
              <div class="search-result-item p-3 hover:bg-gray-50 cursor-pointer rounded border-l-4 border-transparent transition-all"
                   onclick="handleSearchResultClick(${JSON.stringify(category).replace(/"/g, '&quot;')})">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <i class="fas ${category.icon} text-yellow-500"></i>
                    <span class="font-medium">${category.name}</span>
                  </div>
                  <span class="text-sm text-gray-500">${category.count} 个书签</span>
                </div>
              </div>
            `
            )
            .join('');
        } else {
          categoryResultsEl.innerHTML = '<p class="text-sm text-gray-500 p-3">无相关分类</p>';
        }

        // 渲染备忘录结果
        const memoResultsEl = document.getElementById('memoResults');
        if (memoResults.length > 0) {
          memoResultsEl.innerHTML = memoResults
            .map(
              memo => `
              <div class="search-result-item p-3 hover:bg-gray-50 cursor-pointer rounded border-l-4 border-transparent transition-all"
                   onclick="handleSearchResultClick(${JSON.stringify(memo).replace(/"/g, '&quot;')})">
                <div class="flex items-center gap-2 mb-1">
                  <i class="fas fa-sticky-note text-green-500"></i>
                  <span class="font-medium">${memo.title}</span>
                </div>
                <p class="text-sm text-gray-600">${memo.content}</p>
                <div class="flex gap-2 mt-2">
                  ${memo.tags.map(tag => `<span class="px-2 py-0.5 bg-green-100 text-green-600 text-xs rounded">${tag}</span>`).join('')}
                </div>
              </div>
            `
            )
            .join('');
        } else {
          memoResultsEl.innerHTML = '<p class="text-sm text-gray-500 p-3">无相关备忘录</p>';
        }

        // 重置搜索索引
        currentSearchIndex = 0;
      }

      function handleSearchResultClick(result) {
        closeGlobalSearch();

        switch (result.type) {
          case 'bookmark':
            // 打开书签
            window.open(result.url, '_blank');
            break;
          case 'category':
            // 筛选分类内容
            filterByCategory(result.name);
            break;
          case 'memo':
            // 跳转到备忘录页面（这里只是模拟）
            alert(`打开备忘录：${result.title}`);
            break;
        }
      }

      // 根据分类筛选书签
      function filterByCategory(categoryName) {
        // 这里可以实现实际的筛选逻辑
        // 比如更新书签列表，只显示该分类的书签
        alert(`筛选分类：${categoryName}\n\n这里将显示该分类下的所有书签。`);

        // 实际实现可以这样做：
        // 1. 更新书签列表显示
        // 2. 更新页面标题显示当前分类
        // 3. 添加清除筛选的按钮
      }

      // 绑定搜索输入事件
      document.addEventListener('DOMContentLoaded', function () {
        const searchInput = document.getElementById('globalSearchInput');
        if (searchInput) {
          searchInput.addEventListener('input', function (e) {
            performGlobalSearch(e.target.value);
          });
        }

        // 搜索历史点击事件
        document.querySelectorAll('.search-history-item').forEach(item => {
          item.addEventListener('click', function () {
            const query = this.textContent;
            document.getElementById('globalSearchInput').value = query;
            performGlobalSearch(query);
          });
        });

        // 全局键盘快捷键 Cmd/Ctrl + K
        document.addEventListener('keydown', function (e) {
          if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
            e.preventDefault();
            openGlobalSearch();
          }
        });
      });
    </script>

    <script>
      // 分类和标签管理功能

      // 分类管理
      function showAddCategoryModal() {
        document.getElementById('addCategoryModal').classList.remove('hidden');
      }

      function hideAddCategoryModal() {
        document.getElementById('addCategoryModal').classList.add('hidden');
      }

      function showManageCategoriesModal() {
        document.getElementById('manageCategoriesModal').classList.remove('hidden');
      }

      function hideManageCategoriesModal() {
        document.getElementById('manageCategoriesModal').classList.add('hidden');
      }

      function handleAddCategory(event) {
        event.preventDefault();
        alert('分类创建成功！');
        hideAddCategoryModal();
      }

      function editCategory(categoryName) {
        // 这里可以打开编辑模态框或直接编辑
        alert(`编辑分类：${categoryName}`);
        hideManageCategoriesModal();
      }

      function deleteCategory(categoryName) {
        if (confirm(`确定要删除分类"${categoryName}"吗？\n\n删除后该分类下的书签将移至"未分类"。`)) {
          alert(`分类"${categoryName}"已删除！`);
          hideManageCategoriesModal();
        }
      }

      // 标签管理
      function showManageTagsModal() {
        document.getElementById('manageTagsModal').classList.remove('hidden');
      }

      function hideManageTagsModal() {
        document.getElementById('manageTagsModal').classList.add('hidden');
      }

      function addNewTag() {
        const input = document.getElementById('newTagInput');
        const tagName = input.value.trim();

        if (tagName) {
          alert(`标签"${tagName}"已添加！`);
          input.value = '';
        }
      }

      // 图标和颜色选择
      document.addEventListener('DOMContentLoaded', function () {
        // 图标选择
        document.querySelectorAll('.icon-option').forEach(button => {
          button.addEventListener('click', function () {
            // 移除所有选中状态
            document.querySelectorAll('.icon-option').forEach(btn => {
              btn.classList.remove('border-primary-500', 'bg-primary-50', 'ring-2', 'ring-primary-200');
            });
            // 添加选中状态
            this.classList.add('border-primary-500', 'bg-primary-50', 'ring-2', 'ring-primary-200');
          });
        });

        // 颜色选择
        document.querySelectorAll('.color-option').forEach(button => {
          button.addEventListener('click', function () {
            // 移除所有选中状态
            document.querySelectorAll('.color-option').forEach(btn => {
              btn.classList.remove('ring-4', 'ring-primary-200', 'border-primary-500', 'scale-110');
            });
            // 添加选中状态
            this.classList.add('ring-4', 'ring-primary-200', 'border-primary-500', 'scale-110');
          });
        });

        // 标签点击筛选
        document.querySelectorAll('.tag-pill').forEach(tag => {
          tag.addEventListener('click', function () {
            const tagName = this.textContent;
            alert(`筛选标签：${tagName}\n\n这里将显示所有包含此标签的书签。`);
          });
        });

        // 分类点击筛选
        document.querySelectorAll('a[href="#"]').forEach(link => {
          link.addEventListener('click', function (e) {
            e.preventDefault();
            const categoryText = this.textContent.trim();
            if (categoryText && !['全部书签', '收藏夹'].includes(categoryText)) {
              alert(`筛选分类：${categoryText}\n\n这里将显示该分类下的所有书签。`);
            }
          });
        });

        // 默认选中第一个图标和颜色
        const firstIcon = document.querySelector('.icon-option');
        const firstColor = document.querySelector('.color-option');
        if (firstIcon) {
          setTimeout(() => firstIcon.click(), 100);
        }
        if (firstColor) {
          setTimeout(() => firstColor.click(), 150);
        }
      });

      // 右键菜单功能
      let currentCategoryName = '';

      function showCategoryContextMenu(event, categoryName) {
        event.preventDefault();
        currentCategoryName = categoryName;

        const menu = document.getElementById('categoryContextMenu');
        menu.style.left = event.pageX + 'px';
        menu.style.top = event.pageY + 'px';
        menu.classList.remove('hidden');

        // 点击其他地方隐藏菜单
        document.addEventListener('click', hideCategoryContextMenu);
      }

      function hideCategoryContextMenu() {
        const menu = document.getElementById('categoryContextMenu');
        menu.classList.add('hidden');
        document.removeEventListener('click', hideCategoryContextMenu);
      }

      function editCategoryFromMenu() {
        if (currentCategoryName && !['全部书签', '收藏夹'].includes(currentCategoryName)) {
          editCategory(currentCategoryName);
        }
        hideCategoryContextMenu();
      }

      function deleteCategoryFromMenu() {
        if (currentCategoryName && !['全部书签', '收藏夹'].includes(currentCategoryName)) {
          deleteCategory(currentCategoryName);
        }
        hideCategoryContextMenu();
      }
    </script>

    <!-- 右键菜单 -->
    <div
      id="categoryContextMenu"
      class="hidden fixed bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 min-w-[120px]">
      <button
        onclick="editCategoryFromMenu()"
        class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2">
        <i class="fas fa-edit text-blue-500"></i>
        编辑分类
      </button>
      <button
        onclick="deleteCategoryFromMenu()"
        class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2">
        <i class="fas fa-trash text-red-500"></i>
        删除分类
      </button>
    </div>
  </body>
</html>
