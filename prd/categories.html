<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>分类管理 - 书签管理器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3b82f6',
              secondary: '#64748b',
              accent: '#10b981',
            },
          },
        },
      };
    </script>
    <style>
      .category-card {
        transition: all 0.3s ease;
      }
      .category-card:hover {
        transform: translateY(-2px);
      }
      .color-option {
        transition: transform 0.2s ease;
      }
      .color-option:hover {
        transform: scale(1.2);
      }
      .color-option.selected {
        transform: scale(1.2);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      }
      .dragging {
        opacity: 0.5;
      }
      .drag-over {
        background-color: #f3f4f6;
        border: 2px dashed #9ca3af;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-3">
            <i class="fas fa-bookmark text-primary text-2xl"></i>
            <h1 class="text-xl font-bold">书签管理器</h1>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a href="index.html" class="text-gray-600 hover:text-primary">首页</a>
            <a href="bookmarks.html" class="text-gray-600 hover:text-primary">书签</a>
            <a href="search.html" class="text-gray-600 hover:text-primary">搜索</a>
            <a href="memos.html" class="text-gray-600 hover:text-primary">备忘录</a>
            <a href="categories.html" class="text-primary font-medium">分类</a>
          </div>
          <button class="md:hidden" onclick="toggleMobileMenu()">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- 主内容区 -->
    <div class="container mx-auto px-4 py-8">
      <!-- 页面标题和操作 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
          <div>
            <h2 class="text-2xl font-bold mb-2">分类管理</h2>
            <p class="text-gray-600">组织和管理您的书签分类，创建层次化的分类结构</p>
          </div>
          <button
            onclick="showAddCategoryModal()"
            class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center">
            <i class="fas fa-plus mr-2"></i>
            新建分类
          </button>
        </div>
      </div>

      <!-- 分类统计 -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm">总分类数</p>
              <p class="text-2xl font-bold">5</p>
            </div>
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-folder text-blue-500 text-xl"></i>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm">子分类数</p>
              <p class="text-2xl font-bold">8</p>
            </div>
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-folder-open text-green-500 text-xl"></i>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm">总书签数</p>
              <p class="text-2xl font-bold">156</p>
            </div>
            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-bookmark text-purple-500 text-xl"></i>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm">平均书签/分类</p>
              <p class="text-2xl font-bold">31</p>
            </div>
            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
              <i class="fas fa-chart-bar text-yellow-500 text-xl"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- 分类树 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold text-lg flex items-center">
            <i class="fas fa-sitemap mr-2 text-primary"></i>
            分类结构
          </h3>
          <div class="flex items-center gap-3">
            <button class="text-sm text-gray-500 hover:text-primary">
              <i class="fas fa-expand-alt mr-1"></i>
              全部展开
            </button>
            <button class="text-sm text-gray-500 hover:text-primary">
              <i class="fas fa-compress-alt mr-1"></i>
              全部折叠
            </button>
          </div>
        </div>

        <div class="space-y-2">
          <!-- 主分类 -->
          <div class="category-item" draggable="true">
            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-move">
              <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
              <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-briefcase text-white text-sm"></i>
              </div>
              <span class="flex-1 font-medium">工作</span>
              <span class="text-sm text-gray-500 mr-3">45 个书签</span>
              <button class="text-gray-400 hover:text-primary mr-2">
                <i class="fas fa-edit"></i>
              </button>
              <button class="text-gray-400 hover:text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>

            <!-- 子分类 -->
            <div class="ml-12 mt-2 space-y-2">
              <div class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-move">
                <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
                <div class="w-6 h-6 bg-blue-400 rounded flex items-center justify-center mr-3">
                  <i class="fas fa-tasks text-white text-xs"></i>
                </div>
                <span class="flex-1 text-sm">项目管理</span>
                <span class="text-xs text-gray-500 mr-3">15 个</span>
              </div>
              <div class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-move">
                <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
                <div class="w-6 h-6 bg-blue-400 rounded flex items-center justify-center mr-3">
                  <i class="fas fa-file-alt text-white text-xs"></i>
                </div>
                <span class="flex-1 text-sm">文档资料</span>
                <span class="text-xs text-gray-500 mr-3">20 个</span>
              </div>
              <div class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-move">
                <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
                <div class="w-6 h-6 bg-blue-400 rounded flex items-center justify-center mr-3">
                  <i class="fas fa-users text-white text-xs"></i>
                </div>
                <span class="flex-1 text-sm">团队协作</span>
                <span class="text-xs text-gray-500 mr-3">10 个</span>
              </div>
            </div>
          </div>

          <div class="category-item" draggable="true">
            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-move">
              <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
              <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-book text-white text-sm"></i>
              </div>
              <span class="flex-1 font-medium">学习</span>
              <span class="text-sm text-gray-500 mr-3">38 个书签</span>
              <button class="text-gray-400 hover:text-primary mr-2">
                <i class="fas fa-edit"></i>
              </button>
              <button class="text-gray-400 hover:text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>

            <div class="ml-12 mt-2 space-y-2">
              <div class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-move">
                <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
                <div class="w-6 h-6 bg-green-400 rounded flex items-center justify-center mr-3">
                  <i class="fas fa-graduation-cap text-white text-xs"></i>
                </div>
                <span class="flex-1 text-sm">在线课程</span>
                <span class="text-xs text-gray-500 mr-3">12 个</span>
              </div>
              <div class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-move">
                <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
                <div class="w-6 h-6 bg-green-400 rounded flex items-center justify-center mr-3">
                  <i class="fas fa-book-open text-white text-xs"></i>
                </div>
                <span class="flex-1 text-sm">技术文档</span>
                <span class="text-xs text-gray-500 mr-3">26 个</span>
              </div>
            </div>
          </div>

          <div class="category-item" draggable="true">
            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-move">
              <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
              <div class="w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-wrench text-white text-sm"></i>
              </div>
              <span class="flex-1 font-medium">开发工具</span>
              <span class="text-sm text-gray-500 mr-3">52 个书签</span>
              <button class="text-gray-400 hover:text-primary mr-2">
                <i class="fas fa-edit"></i>
              </button>
              <button class="text-gray-400 hover:text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <div class="category-item" draggable="true">
            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-move">
              <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
              <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-palette text-white text-sm"></i>
              </div>
              <span class="flex-1 font-medium">设计资源</span>
              <span class="text-sm text-gray-500 mr-3">28 个书签</span>
              <button class="text-gray-400 hover:text-primary mr-2">
                <i class="fas fa-edit"></i>
              </button>
              <button class="text-gray-400 hover:text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <div class="category-item" draggable="true">
            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-move">
              <i class="fas fa-grip-vertical text-gray-400 mr-3"></i>
              <div class="w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-rocket text-white text-sm"></i>
              </div>
              <span class="flex-1 font-medium">效率工具</span>
              <span class="text-sm text-gray-500 mr-3">21 个书签</span>
              <button class="text-gray-400 hover:text-primary mr-2">
                <i class="fas fa-edit"></i>
              </button>
              <button class="text-gray-400 hover:text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 批量操作 -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="font-semibold text-lg mb-4">批量操作</h3>
        <div class="flex flex-wrap gap-3">
          <button class="px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center">
            <i class="fas fa-download mr-2"></i>
            导出分类
          </button>
          <button class="px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center">
            <i class="fas fa-upload mr-2"></i>
            导入分类
          </button>
          <button class="px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center">
            <i class="fas fa-sort-alpha-down mr-2"></i>
            按名称排序
          </button>
          <button class="px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center">
            <i class="fas fa-sort-amount-down mr-2"></i>
            按书签数排序
          </button>
          <button class="px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center">
            <i class="fas fa-trash-alt mr-2"></i>
            清空空分类
          </button>
        </div>
      </div>
    </div>

    <!-- 新建分类模态框 -->
    <div
      id="addCategoryModal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
        <h3 class="text-xl font-semibold mb-4">新建分类</h3>
        <form onsubmit="handleAddCategory(event)">
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">分类名称</label>
            <input
              type="text"
              required
              class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary" />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">父分类</label>
            <select class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
              <option value="">无（主分类）</option>
              <option value="work">工作</option>
              <option value="study">学习</option>
              <option value="dev">开发工具</option>
              <option value="design">设计资源</option>
              <option value="productivity">效率工具</option>
            </select>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">选择颜色</label>
            <div class="flex gap-2">
              <button type="button" class="color-option w-10 h-10 bg-blue-500 rounded-lg" data-color="#3b82f6"></button>
              <button
                type="button"
                class="color-option w-10 h-10 bg-green-500 rounded-lg"
                data-color="#10b981"></button>
              <button
                type="button"
                class="color-option w-10 h-10 bg-yellow-500 rounded-lg"
                data-color="#f59e0b"></button>
              <button
                type="button"
                class="color-option w-10 h-10 bg-purple-500 rounded-lg"
                data-color="#8b5cf6"></button>
              <button type="button" class="color-option w-10 h-10 bg-red-500 rounded-lg" data-color="#ef4444"></button>
              <button type="button" class="color-option w-10 h-10 bg-pink-500 rounded-lg" data-color="#ec4899"></button>
              <button type="button" class="color-option w-10 h-10 bg-gray-500 rounded-lg" data-color="#6b7280"></button>
              <button
                type="button"
                class="color-option w-10 h-10 bg-indigo-500 rounded-lg"
                data-color="#6366f1"></button>
            </div>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">选择图标</label>
            <div class="grid grid-cols-6 gap-2">
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="folder">
                <i class="fas fa-folder"></i>
              </button>
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="star">
                <i class="fas fa-star"></i>
              </button>
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="heart">
                <i class="fas fa-heart"></i>
              </button>
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="bookmark">
                <i class="fas fa-bookmark"></i>
              </button>
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="flag">
                <i class="fas fa-flag"></i>
              </button>
              <button type="button" class="icon-option p-2 border rounded hover:bg-gray-50" data-icon="tag">
                <i class="fas fa-tag"></i>
              </button>
            </div>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">描述（可选）</label>
            <textarea
              rows="3"
              class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
          </div>
          <div class="flex justify-end gap-3">
            <button type="button" onclick="hideAddCategoryModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600">创建</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // 颜色选择
      let selectedColor = '#3b82f6';
      let selectedIcon = 'folder';

      document.querySelectorAll('.color-option').forEach(btn => {
        btn.addEventListener('click', function () {
          document.querySelectorAll('.color-option').forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
          selectedColor = this.dataset.color;
        });
      });

      // 图标选择
      document.querySelectorAll('.icon-option').forEach(btn => {
        btn.addEventListener('click', function () {
          document.querySelectorAll('.icon-option').forEach(b => b.classList.remove('ring-2', 'ring-primary'));
          this.classList.add('ring-2', 'ring-primary');
          selectedIcon = this.dataset.icon;
        });
      });

      // 模态框控制
      function showAddCategoryModal() {
        document.getElementById('addCategoryModal').classList.remove('hidden');
      }

      function hideAddCategoryModal() {
        document.getElementById('addCategoryModal').classList.add('hidden');
      }

      function handleAddCategory(event) {
        event.preventDefault();
        console.log('创建分类', { color: selectedColor, icon: selectedIcon });
        alert('分类创建成功！');
        hideAddCategoryModal();
      }

      // 拖拽排序
      let draggedElement = null;

      document.addEventListener('DOMContentLoaded', function () {
        const categoryItems = document.querySelectorAll('.category-item');

        categoryItems.forEach(item => {
          item.addEventListener('dragstart', handleDragStart);
          item.addEventListener('dragover', handleDragOver);
          item.addEventListener('drop', handleDrop);
          item.addEventListener('dragend', handleDragEnd);
        });
      });

      function handleDragStart(e) {
        draggedElement = this;
        this.classList.add('dragging');
      }

      function handleDragOver(e) {
        e.preventDefault();
        this.classList.add('drag-over');
      }

      function handleDrop(e) {
        e.preventDefault();
        if (this !== draggedElement) {
          // 实际项目中，这里会更新DOM顺序
          console.log('交换位置');
        }
        this.classList.remove('drag-over');
      }

      function handleDragEnd(e) {
        this.classList.remove('dragging');
        document.querySelectorAll('.drag-over').forEach(el => {
          el.classList.remove('drag-over');
        });
      }

      // 移动端菜单
      function toggleMobileMenu() {
        alert('移动端菜单功能');
      }
    </script>
  </body>
</html>
